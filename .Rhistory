bd_plot<-function(data,transect){
data1<-subset(data,data$Transect==transect)
data1 = droplevels(data1)
par(xpd = FALSE)
if(min(data1$BD_dist, na.rm = TRUE) > 0){
y_min = -0.1
} else {y_min = min(data1$BD_dist, na.rm = TRUE)}
if(max(data1$BD_dist, na.rm = TRUE) > 0){
y_max = max(data1$BD_dist, na.rm = TRUE)
} else {y_max = 0.1}
plot(data1$Point, data1$BD_dist,col=soil$Color,cex=0,pch=15,
ylab="Bulk Density, distance from target (g/cm^3)",
xlab="", main=paste("Bulk Density - ",transect), ylim = c(y_min, y_max), las = 2)
abline(v = 0,lty = "dashed")
abline(h = 0,lty = "dashed")
#identify(data1$Point,data1$Infilt_dist,labels=data1$Location, cex=0.75, at.pen=TRUE)
}
#compaction_plot(data=soil,transect="TCUP")
#################################
###Percent Change plots##########
#################################
percent_change_plot<-function(data,transect){
data1<-subset(data,data$Transect==transect)
data2<-subset(data,data$Transect!=transect)
data$Comp<-"all other"
data$Comp<-replace(data$Comp,data$Transect==transect,transect)
data$Color<-"gray"
data$Color<-replace(data$Color,data$Transect==transect,"black")
soil_sub<-subset(data,select=c("Location","Comp","Color","Carbon010change", "Carbon1040change","Bulk.density.change"))
soil_sub2<-melt(soil_sub)
boxplot(value~Comp + variable, data = soil_sub2,
col=c("gray","white"),
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0)
axis(side=1, at=c(1.45,4.45,7.45), labels=c('0-10 cm carbon', '10-40 cm carbon','bulk density'), line=0.5, lwd=0,cex.axis=0.8, las = 1)
abline(h=0)
legend("bottomright", legend = c(transect, "Regional Average"), fill = c("gray", "white"))
points(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change,pch=16,col="black")
identify(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change,pch=16,col="black")
identify(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change,pch=16,col="black")
identify(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change, labels=data1$Location,cex=.75,at.pen=TRUE)
#points(rep(1,length(data2$Carbon010change)), data2$Carbon010change,pch=16,col="gray")
#points(rep(4,length(data2$Carbon1040change)), data2$Carbon1040change,pch=16,col="gray")
#points(rep(7,length(data2$Bulk.density.change)), data2$Bulk.density.change,pch=16,col="gray")
boxplot(value~Comp + variable, data = soil_sub2,
col=NA,
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0,add=TRUE)
}
#percent_change_plot(soil,"TCUP")
####################################################
####################################################
###SECTION 3: RUN THE FUNCTIONS FOR EACH PROPERTY###
####################################################
####################################################
#SANR, SFWO, DIVR
###############################################
##SOMETHING ISN"T WORKING WITH THE LABELING!!##
###############################################
#
# #SANR POINT PLOTS
# data_sum(soil,"SANR")
# texture_triangle_plot(data=soil,transect="SANR")
# carbon_plot(data=soil,transect="SANR")
# compaction_plot(data=soil,transect="SANR")
# percent_change_plot(soil,"SANR")
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# ```
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# #
# ```{r echo = FALSE, message = FALSE, warning = FALSE}
#
#
# #Divide Ranch POINT PLOTS
# data_sum(soil,"DIVR")
# texture_triangle_plot(data=soil,transect="DIVR")
# carbon_plot(data=soil,transect="DIVR")
# compaction_plot(data=soil,transect="DIVR")
# percent_change_plot(soil,"DIVR")
#
# ```
# ```{r echo = FALSE, message = FALSE, warning = FALSE}
# data_sum(soil,"TCUP")
# texture_triangle_plot(data=soil,transect="TCUP")
# carbon_plot(data=soil,transect="TCUP")
# compaction_plot(data=soil,transect="TCUP")
# percent_change_plot(soil,"TCUP")
# #Cloverdale POINT PLOTS
# data_sum(soil,"CLOV")
# texture_triangle_plot(data=soil,transect="CLOV")
# carbon_plot(data=soil,transect="CLOV")
# compaction_plot(data=soil,transect="CLOV")
# percent_change_plot(soil,"CLOV")
#
# #TOTO POINT PLOTS
# data_sum(soil,"TOTO")
# texture_triangle_plot(data=soil,transect="TOTO")
# carbon_plot(data=soil,transect="TOTO")
# compaction_plot(data=soil,transect="TOTO")
# percent_change_plot(soil,"TOTO")
data_sum(soil, transect = "DOMI")
texture_triangle_plot(data=soil,transect="DOMI")
carbon_plot(data=soil,transect = "DOMI")
compaction_plot(data=soil,transect="DOMI")
infiltration_plot(data=soil,transect="DOMI")
bd_plot(data=soil,transect="DOMI")
#percent_change_plot(soil,"BAHI")
# data_sum(soil, transect = "POMO")
# texture_triangle_plot(data=soil,transect="POMO")
# carbon_plot(data=soil,transect = "POMO")
# compaction_plot(data=soil,transect="POMO")
View(soil)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
<<<<<<< HEAD
##Read in the necessary libraries##
library(PairedData)
library(stringr)
library(ggrepel)
library(soiltexture)
library(reshape2)
library(gridExtra)
library(dplyr)
library(tidyverse)
library(lubridate)
library(ggrepel)
library(RMN)
###############################################
###SECTION 1: DATA FORMATTING##################
###############################################
##Load in the data##
data1 = read.csv("TOKA_soil.csv")
###############################################
###SECTION 1: DATA FORMATTING##################
###############################################
##Load in the data##
data1 = read.csv("TOKA_soil.csv")
##Read in the necessary libraries##
library(PairedData)
library(stringr)
library(ggrepel)
library(soiltexture)
library(reshape2)
library(gridExtra)
library(dplyr)
library(tidyverse)
library(lubridate)
library(ggrepel)
library(RMN)
###############################################
###SECTION 1: DATA FORMATTING##################
###############################################
##Load in the data##
data1 = read.csv("Marin_Sonoma_soil.csv")
#Format the date fields and bulk density measurements
##Turn blank water infiltration times to 0
#Create a column to hold water infiltration times in seconds
data = add.soilcolumns(data1)
newdata = survey.sums(data)
Paired_data = pair.data(newdata, singlesurvey = TRUE)
soil = soil.final.cleanup(Paired_data, first = TRUE)
soil1 = prepare.soil.triangle(soil)
################################
##Compaction/Infiltration Plot##
################################
compaction_plot<-function(data, transect){
data1<-subset(data, data$Transect==transect)
data2<-subset(data, data$Transect!=transect)
plot(data$BD_dist, data$Infilt_dist, col=soil$Color, cex=0, pch=16,
ylab="Infiltration, distance from target",
xlab="Bulk density, distance from target", main=paste("Compaction - ", transect),
)
points(data2$BD_dist, data2$Infilt_dist, pch=16, col="gray")
points(data1$BD_dist, data1$Infilt_dist, pch=16, col="black")
abline(v=0, lty="dashed")
abline(h=0, lty="dashed")
identify(data1$BD_dist, data1$Infilt_dist, labels=data1$Location, cex=0.75, at.pen=TRUE)
}
# compaction_plot(data=soil, transect="TCUP")
#ggplot(soil, aes(x = BD_dist, y = Infilt_dist)) + geom_point()
#################################
###Percent Change plots##########
#################################
percent_change_plot<-function(data,transect){
data1<-subset(data,data$Transect==transect)
data2<-subset(data,data$Transect!=transect)
data$Comp<-"all other"
data$Comp<-replace(data$Comp,data$Transect==transect,transect)
data$Color<-"gray"
data$Color<-replace(data$Color,data$Transect==transect,"black")
soil_sub<-subset(data,select=c("Location","Comp","Color","Carbon010change", "Carbon1040change","Bulk.density.change"))
soil_sub2<-melt(soil_sub)
boxplot(value~Comp + variable, data = soil_sub2,
col=c("gray","white"),
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0)
axis(side=1, at=c(1.45,4.45,7.45), labels=c('0-10 cm carbon', '10-40 cm carbon','bulk density'), line=0.5, lwd=0,cex.axis=0.8, las = 1)
abline(h=0)
legend("topright", legend = c(transect, "Regional Average"), fill = c("gray", "white"))
points(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change,pch=16,col="black")
identify(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change,pch=16,col="black")
identify(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change,pch=16,col="black")
identify(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change, labels=data1$Location,cex=.75,at.pen=TRUE)
#points(rep(1,length(data2$Carbon010change)), data2$Carbon010change,pch=16,col="gray")
#points(rep(4,length(data2$Carbon1040change)), data2$Carbon1040change,pch=16,col="gray")
#points(rep(7,length(data2$Bulk.density.change)), data2$Bulk.density.change,pch=16,col="gray")
boxplot(value~Comp + variable, data = soil_sub2,
col=NA,
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0,add=TRUE)
}
#percent_change_plot(soil,"TCUP")
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# ```
r = "SANR"
#Divide Ranch POINT PLOTS
data.sum(soil,r)
##Read in the necessary libraries##
library(PairedData)
library(stringr)
library(ggrepel)
library(soiltexture)
library(reshape2)
library(gridExtra)
library(dplyr)
library(tidyverse)
library(lubridate)
library(ggrepel)
library(RMN)
###############################################
###SECTION 1: DATA FORMATTING##################
###############################################
##Load in the data##
data1 = read.csv("Marin_Sonoma_soil.csv")
#Format the date fields and bulk density measurements
##Turn blank water infiltration times to 0
#Create a column to hold water infiltration times in seconds
data = add.soilcolumns(data1)
newdata = survey.sums(data)
Paired_data = pair.data(newdata, singlesurvey = TRUE)
soil = soil.final.cleanup(Paired_data, first = TRUE)
soil1 = prepare.soil.triangle(soil)
################################
##Compaction/Infiltration Plot##
################################
compaction_plot<-function(data, transect){
data1<-subset(data, data$Transect==transect)
data2<-subset(data, data$Transect!=transect)
plot(data$BD_dist, data$Infilt_dist, col=soil$Color, cex=0, pch=16,
ylab="Infiltration, distance from target",
xlab="Bulk density, distance from target", main=paste("Compaction - ", transect),
)
points(data2$BD_dist, data2$Infilt_dist, pch=16, col="gray")
points(data1$BD_dist, data1$Infilt_dist, pch=16, col="black")
abline(v=0, lty="dashed")
abline(h=0, lty="dashed")
identify(data1$BD_dist, data1$Infilt_dist, labels=data1$Location, cex=0.75, at.pen=TRUE)
}
# compaction_plot(data=soil, transect="TCUP")
#ggplot(soil, aes(x = BD_dist, y = Infilt_dist)) + geom_point()
#################################
###Percent Change plots##########
#################################
percent_change_plot<-function(data,transect){
data1<-subset(data,data$Transect==transect)
data2<-subset(data,data$Transect!=transect)
data$Comp<-"all other"
data$Comp<-replace(data$Comp,data$Transect==transect,transect)
data$Color<-"gray"
data$Color<-replace(data$Color,data$Transect==transect,"black")
soil_sub<-subset(data,select=c("Location","Comp","Color","Carbon010change", "Carbon1040change","Bulk.density.change"))
soil_sub2<-melt(soil_sub)
boxplot(value~Comp + variable, data = soil_sub2,
col=c("gray","white"),
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0)
axis(side=1, at=c(1.45,4.45,7.45), labels=c('0-10 cm carbon', '10-40 cm carbon','bulk density'), line=0.5, lwd=0,cex.axis=0.8, las = 1)
abline(h=0)
legend("topright", legend = c(transect, "Regional Average"), fill = c("gray", "white"))
points(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change,pch=16,col="black")
identify(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change,pch=16,col="black")
identify(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change,pch=16,col="black")
identify(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change, labels=data1$Location,cex=.75,at.pen=TRUE)
#points(rep(1,length(data2$Carbon010change)), data2$Carbon010change,pch=16,col="gray")
#points(rep(4,length(data2$Carbon1040change)), data2$Carbon1040change,pch=16,col="gray")
#points(rep(7,length(data2$Bulk.density.change)), data2$Bulk.density.change,pch=16,col="gray")
boxplot(value~Comp + variable, data = soil_sub2,
col=NA,
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0,add=TRUE)
}
#percent_change_plot(soil,"TCUP")
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# ```
r = "PONU"
#Divide Ranch POINT PLOTS
data.sum(soil,r)
#Divide Ranch POINT PLOTS
data.sum(soil %>% prepare.soil.triangle(),r)
prepare.soil.triangle(soil) %>% texture.triangle.plot(transect = r)
#Divide Ranch POINT PLOTS
prepare.soil.triangle(soil) %>% data.sum(r)
prepare.soil.triangle(soil) %>% texture.triangle.plot(transect = r)
View(data)
##Read in the necessary libraries##
library(PairedData)
library(stringr)
library(ggrepel)
library(soiltexture)
library(reshape2)
library(gridExtra)
library(dplyr)
library(tidyverse)
library(lubridate)
library(ggrepel)
library(RMN)
###############################################
###SECTION 1: DATA FORMATTING##################
###############################################
##Load in the data##
data1 = read.csv("TOKA_soil.csv")
#Format the date fields and bulk density measurements
##Turn blank water infiltration times to 0
#Create a column to hold water infiltration times in seconds
data = add.soilcolumns(data1)
newdata = survey.sums(data)
Paired_data = pair.data(newdata, singlesurvey = TRUE)
soil = soil.final.cleanup(Paired_data, first = TRUE)
soil1 = prepare.soil.triangle(soil)
################################
##Compaction/Infiltration Plot##
################################
compaction_plot<-function(data, transect){
data1<-subset(data, data$Transect==transect)
data2<-subset(data, data$Transect!=transect)
plot(data$BD_dist, data$Infilt_dist, col=soil$Color, cex=0, pch=16,
ylab="Infiltration, distance from target",
xlab="Bulk density, distance from target", main=paste("Compaction - ", transect),
)
points(data2$BD_dist, data2$Infilt_dist, pch=16, col="gray")
points(data1$BD_dist, data1$Infilt_dist, pch=16, col="black")
abline(v=0, lty="dashed")
abline(h=0, lty="dashed")
identify(data1$BD_dist, data1$Infilt_dist, labels=data1$Location, cex=0.75, at.pen=TRUE)
}
# compaction_plot(data=soil, transect="TCUP")
#ggplot(soil, aes(x = BD_dist, y = Infilt_dist)) + geom_point()
#################################
###Percent Change plots##########
#################################
percent_change_plot<-function(data,transect){
data1<-subset(data,data$Transect==transect)
data2<-subset(data,data$Transect!=transect)
data$Comp<-"all other"
data$Comp<-replace(data$Comp,data$Transect==transect,transect)
data$Color<-"gray"
data$Color<-replace(data$Color,data$Transect==transect,"black")
soil_sub<-subset(data,select=c("Location","Comp","Color","Carbon010change", "Carbon1040change","Bulk.density.change"))
soil_sub2<-melt(soil_sub)
boxplot(value~Comp + variable, data = soil_sub2,
col=c("gray","white"),
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0)
axis(side=1, at=c(1.45,4.45,7.45), labels=c('0-10 cm carbon', '10-40 cm carbon','bulk density'), line=0.5, lwd=0,cex.axis=0.8, las = 1)
abline(h=0)
legend("topright", legend = c(transect, "Regional Average"), fill = c("gray", "white"))
points(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change,pch=16,col="black")
identify(rep(1.8,length(data1$Carbon010change)), data1$Carbon010change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change,pch=16,col="black")
identify(rep(4.8,length(data1$Carbon1040change)), data1$Carbon1040change, labels=data1$Location,cex=.75,at.pen=TRUE)
points(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change,pch=16,col="black")
identify(rep(7.8,length(data1$Bulk.density.change)), data1$Bulk.density.change, labels=data1$Location,cex=.75,at.pen=TRUE)
#points(rep(1,length(data2$Carbon010change)), data2$Carbon010change,pch=16,col="gray")
#points(rep(4,length(data2$Carbon1040change)), data2$Carbon1040change,pch=16,col="gray")
#points(rep(7,length(data2$Bulk.density.change)), data2$Bulk.density.change,pch=16,col="gray")
boxplot(value~Comp + variable, data = soil_sub2,
col=NA,
at = c(1, 1.8, 4, 4.8, 7,7.8),
ylab="% change",
xaxt="n",
main=paste("% Change 2015-2018 - ",transect),
range=0,add=TRUE)
}
#percent_change_plot(soil,"TCUP")
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# ```
r = "PONU"
#Divide Ranch POINT PLOTS
prepare.soil.triangle(soil) %>% data.sum(r)
#Divide Ranch POINT PLOTS
data.sum(soil, r)
# #SFWO POINT PLOTS
# data_sum(soil,"SFWO")
# texture_triangle_plot(data=soil,transect="SFWO")
# carbon_plot(data=soil,transect="SFWO")
# compaction_plot(data=soil,transect="SFWO")
# percent_change_plot(soil,"SFWO")
# ```
r = "PONU"
#Divide Ranch POINT PLOTS
data.sum(soil, r)
prepare.soil.triangle(soil) %>% texture.triangle.plot(transect = r)
carbon.plot(data = soil, transect = r)
compaction_plot(data=soil %>% prepare.soil.triangle(),transect = r)
percent_change_plot(soil %>% prepare.soil.triangle(), r) #check on this
compaction.plot(soil, r)
compaction_plot(data=soil %>% prepare.soil.triangle(),transect = r)
compaction.plot(soil, r)
=======
library(RMN)
install.packages("Rtools")
library(Rtools)
extrapolate_inf(1.5, 45)
library(RMN)
extrapolate_inf(1.5)
extrapolate_inf(2.25, 56)
Hi, how are you?
>>>>>>> eed9415be5bca4c69848bd86f7b2802747226e83
library(RMN)
library(RMN)
View(Paired_data)
View(Paired_data)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(ggrepel)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(RMN)
library(ggplot2)
?grid.table
grid.table(data2,theme= ttheme_default(base_size=10), rows = NULL)
library(RMN)
library(RMN)
